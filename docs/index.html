<!doctype html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>HOU (USW00012918) — GHCN‑Daily</title>
<script src="https://cdn.jsdelivr.net/npm/plotly.js-dist-min@2.35.2/plotly.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
<link href="https://cdn.jsdelivr.net/npm/gridjs@6.2.0/dist/theme/mermaid.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/gridjs@6.2.0/dist/gridjs.umd.js"></script>
<style>
  :root {
    color-scheme: light dark;
    --bg: #f7f8fb;
    --card-bg: #ffffff;
    --text: #0f172a;
    --muted: #6b7280;
    --radius: 12px;
    --shadow: 0 6px 20px rgba(0,0,0,.06);
  }
  body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 0; line-height: 1.35; background: var(--bg); color: var(--text); }
  .container { max-width: 1100px; margin: 0 auto; padding: 1rem; }
  .card { background: var(--card-bg); border-radius: var(--radius); box-shadow: var(--shadow); padding: 0.9rem 1.1rem; margin: 1rem 0; }
  #chart { width: 100%; height: 64vh; max-height: 900px; }
  #ridge { width: 100%; height: 62vh; max-height: 850px; }
  .note { color: var(--muted); font-size: .92rem; }
  /* Summary controls & table */
  .summary-wrap { padding: 0.5rem 0.2rem 0.8rem; }
  .summary-controls { display: flex; flex-wrap: wrap; gap: 1rem; align-items: center; margin: 0.4rem 0 0.6rem; }
  .summary-controls .group { display: flex; align-items: center; gap: 0.5rem; }
  .summary-controls label { font-size: 0.95rem; }
  .summary-controls .metric label { margin-right: 0.75rem; }
  .summary-controls input[type="number"] { width: 6rem; padding: 0.25rem 0.4rem; }
  .summary-actions { margin-left: auto; display: flex; gap: 0.5rem; }
  #summary-grid { width: 100%; }
  button { padding: 0.35rem 0.6rem; }
  h2 { margin: 0.5rem 0 0.25rem; }
  h1 { margin: .3rem 0; }
  
</style>
<div class="container">
  <header class="card">
    <h1>HOU (USW00012918) — GHCN‑Daily, 1990→present</h1>
    <div class="note">Data source: NCEI ADS daily‑summaries. Updated daily via GitHub Actions.</div>
    <div id="dataStatus" class="note"></div>
  </header>

  <div class="card">
    <!-- Chart 1: Daily Max/Min time-series -->
    <div id="chart"></div>
  </div>

  <!-- Chart 2: Ridgeline (Daily Mean by Day-of-Year) -->
  <section class="card">
    <h2 id="ridgeTitle">Ridgeline — Daily Mean Temperature by Day‑of‑Year</h2>
    <div class="note">Canonical DOY axis (1–366); gaps shown explicitly.</div>
    <div id="ridge"></div>
  </section>

  <!-- Monthly summary table -->
  <section class="card summary-wrap">
    <h2>Monthly Summary by Year</h2>
    <div class="note">Select a metric and year range. Values in °F (1 decimal).</div>
    <div class="summary-controls">
      <div class="group metric">
        <label><strong>Metric:</strong></label>
        <label><input type="radio" name="metric" value="avg_tmax" checked> Avg TMAX</label>
        <label><input type="radio" name="metric" value="avg_tmin"> Avg TMIN</label>
        <label><input type="radio" name="metric" value="rec_tmax"> Record TMAX</label>
        <label><input type="radio" name="metric" value="rec_tmin"> Record TMIN</label>
      </div>
      <div class="group">
        <label for="yearStart"><strong>Years:</strong></label>
        <input id="yearStart" type="number" step="1">
        <span>to</span>
        <input id="yearEnd" type="number" step="1">
      </div>
      <div class="summary-actions">
        <button id="btnApply">Apply</button>
        <button id="btnDownload">Download CSV</button>
      </div>
    </div>
    <div id="summary-grid"></div>
  </section>
</div>
<script src="./assets/main.js"></script>
